---
const GA_MEASUREMENT_ID = import.meta.env.PUBLIC_GA_MEASUREMENT_ID;
---

{GA_MEASUREMENT_ID && (
	<>
	<!-- Google tag (gtag.js) -->
	<script async src={`https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`}></script>
	<script is:inline define:vars={{ GA_MEASUREMENT_ID }}>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', GA_MEASUREMENT_ID, {
			cookie_expires: 15552000,
			cookie_update: true,
			cookie_domain: 'auto',
			cookie_flags: 'secure;samesite=strict',
			allow_google_signals: false,
			allow_ad_personalization_signals: false,
		});
	</script>
	</>
)}